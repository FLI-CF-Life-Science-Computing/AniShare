
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Welcome to the documentation of anishare ! &#8212; AniShare 1.3 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-the-documentation-of-anishare">
<h1>Welcome to the documentation of anishare !<a class="headerlink" href="#welcome-to-the-documentation-of-anishare" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><strong>anishare</strong> is a webservice for research institutes to share animals with the goal to re-use
animals and thus minimize total animal usage.</p>
<p>It has been developed at the <a class="reference external" href="http://leibniz-fli.de">Leibniz institute for aging research</a> in
Jena. This django app is meant to be used by researchers who want to share research animals with
their colleagues. The basic idea is that animals are bred for experiments; however, sometimes, not
all parts of the animal are used or sometimes an experiment gets cancelled for whatever reason. By
sharing animals within the institute, less animals in total have to be sacrificed for research.</p>
<p>Anishare is a simple database of animals offered for reuse and a easy way to claim an animal with
automatic generation of email messages as well as an RSS feed for updates.</p>
<img alt="_images/anishare_index.png" src="_images/anishare_index.png" />
<p>At the moment, the software/database is geared towards handling of mice, however, it can be adjusted
to handle any kind of research animal.</p>
<p>This documentation can also be downloaded as pdf file: <a class="reference external" href="https://anishare.leibniz-fli.de/static/doc/anishare_documentation.pdf">Anishare Documentation</a></p>
</div>
<div class="section" id="contact">
<h2>Contact<a class="headerlink" href="#contact" title="Permalink to this headline">¶</a></h2>
<p>Technical and application support: Fabian Monheim, <a class="reference external" href="mailto:fabian&#46;monheim&#37;&#52;&#48;leibniz-fli&#46;de">fabian<span>&#46;</span>monheim<span>&#64;</span>leibniz-fli<span>&#46;</span>de</a>, 03641-65-6872
Content support: <a class="reference external" href="mailto:mouse&#37;&#52;&#48;leibniz-fli&#46;de">mouse<span>&#64;</span>leibniz-fli<span>&#46;</span>de</a>, <a class="reference external" href="mailto:fish&#37;&#52;&#48;leibniz-fli&#46;de">fish<span>&#64;</span>leibniz-fli<span>&#46;</span>de</a></p>
</div>
<div class="section" id="using-the-software">
<h2>Using the software<a class="headerlink" href="#using-the-software" title="Permalink to this headline">¶</a></h2>
<img alt="_images/anishare_index_highlight.png" src="_images/anishare_index_highlight.png" />
<p>The webservice is split in two parts: The <strong>animal input</strong> method is via the Django Admin interface (See link
“Add Animal” top right) and is meant for <em>animal managers</em> only.
The <strong>claim</strong> method is via the normal web interface and is meant for normal users (who need to be
authenticated, though).</p>
<div class="section" id="main-user-interface">
<h3>Main user interface<a class="headerlink" href="#main-user-interface" title="Permalink to this headline">¶</a></h3>
<div class="section" id="animals">
<h4>Animals<a class="headerlink" href="#animals" title="Permalink to this headline">¶</a></h4>
<p>The main user-facing site is the list of animals to be shared. A user can browse this list, sort it
via the headers or search for a term using the search bar.</p>
<img alt="_images/anishare_index.png" src="_images/anishare_index.png" />
<p>If a user is interested in an animal, they should click on the button “Claim” which will bring up
another page (see below) in which they can review their claim before finally submitting. When they
click on “Yes, I want to claim this!”, then they will be entered as <em>new owner</em> of this animal and
an email will be send to them as well as the responsible/contact person informing them about this
transaction. Further steps might need to be necessary such as transferring the animal in the LIMS
(eg. PyRat).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If more than one animal is available, the user can adjust the number they want to claim.
The remaining animals will still be available for claim. Because of uniqueness it’s only
possible to offer exactly one mouse per dataset. In contrast fishes can be offer in a group.</p>
</div>
<img alt="_images/anishare_claim.png" src="_images/anishare_claim.png" />
</div>
<div class="section" id="organs">
<h4>Organs<a class="headerlink" href="#organs" title="Permalink to this headline">¶</a></h4>
<p>There exists an individual page for animal organ share. It is very similar to the animal page,
however only individual organs are for offer. The entry at the column <code class="docutils literal notranslate"><span class="pre">Organ</span> <span class="pre">(used)</span></code> indicates
all organs which can not be claimed. Also there is no availability period, but a day at
which the animal gets sacrificed. The person responsible for sacrifice the animal will be informed via
email if anybody claims some of the available organs. The entry will remain available to others (as
they might want to claim other organs).</p>
<p>Organ index view:</p>
<img alt="_images/organs_index.png" src="_images/organs_index.png" />
<p>Organ claim view:</p>
<img alt="_images/organs_claim.png" src="_images/organs_claim.png" />
</div>
<div class="section" id="rss-feed">
<h4>RSS Feed<a class="headerlink" href="#rss-feed" title="Permalink to this headline">¶</a></h4>
<p>An RSS feed containing the latest ten animals and organs is automatically generated and can be found at
<cite>/animals/feed</cite>. Users can subscribe (Most email clients allow the subscription
to RSS feeds) to this feed to stay up-to-date with the animal catalogue. By clicking on a link in
the feed, they are directed to the claim page of the individual animal/organ.</p>
<a class="reference internal image-reference" href="_images/anishare_rss_feed.png"><img alt="_images/anishare_rss_feed.png" src="_images/anishare_rss_feed.png" style="width: 50%;" /></a>
</div>
</div>
<div class="section" id="main-animal-manager-tasks">
<h3>Main animal manager tasks<a class="headerlink" href="#main-animal-manager-tasks" title="Permalink to this headline">¶</a></h3>
<p>An <em>animal manager</em> can add animals and organs to the database on two ways. First, it is possible to
add entrys manually. Secondly, it is possible to import an Excel sheet. At the FLI Jena there are two
databases to manage animals. Now the databases are not connected. To transfer more than one or two datasets
to anishare it’s recommend to use the export function of PyRAT or <a class="reference external" href="mailto:tick&#37;&#52;&#48;lab">tick<span>&#64;</span>lab</a> and the import function of anishare.
To use the export/import process please read the topic <strong>Animals import</strong> or <strong>Organs import</strong>.</p>
<a class="reference internal image-reference" href="_images/admin_overview_manager.png"><img alt="_images/admin_overview_manager.png" src="_images/admin_overview_manager.png" style="width: 60%;" /></a>
<div class="section" id="add-animals-manually">
<h4>Add Animals manually<a class="headerlink" href="#add-animals-manually" title="Permalink to this headline">¶</a></h4>
<p>Click on <code class="docutils literal notranslate"><span class="pre">Animals</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Add</span></code> to add an animal.</p>
<a class="reference internal image-reference" href="_images/admin_add_animal.png"><img alt="_images/admin_add_animal.png" src="_images/admin_add_animal.png" style="width: 40%;" /></a>
<p>All fields in bold <strong>need</strong> to be filled in, the others are optional.</p>
<p>After adding several animals, the main (index) view should look like this:</p>
<img alt="_images/admin_after_loaddata.png" src="_images/admin_after_loaddata.png" />
</div>
<div class="section" id="animals-import">
<h4>Animals import<a class="headerlink" href="#animals-import" title="Permalink to this headline">¶</a></h4>
<div class="section" id="from-pyrat">
<h5>From PyRAT<a class="headerlink" href="#from-pyrat" title="Permalink to this headline">¶</a></h5>
<p>First login to PyRAT and switch to the english version of PyRAT if it is no preset. Then select the animals which
should be import to anishare. Click on <code class="docutils literal notranslate"><span class="pre">QS</span></code> (Quick Select) and activate the option <code class="docutils literal notranslate"><span class="pre">Export</span> <span class="pre">this</span> <span class="pre">list</span> <span class="pre">to</span> <span class="pre">Excel</span></code>.
Push the button <code class="docutils literal notranslate"><span class="pre">Apply</span></code>.</p>
<a class="reference internal image-reference" href="_images/pyrat_export.png"><img alt="_images/pyrat_export.png" src="_images/pyrat_export.png" style="width: 40%;" /></a>
<p>Now it’s important to select all mandatory fields:
<strong>ID, Lab ID, Sex, Line / Strine (Name), Mutations, Date of birth, Responsible, License number, Building</strong></p>
<p>It’s possible to save the selected columns as a <code class="docutils literal notranslate"><span class="pre">Manage</span> <span class="pre">View</span></code> for reuse (fold out <code class="docutils literal notranslate"><span class="pre">Manage</span> <span class="pre">View</span></code> on the left side of the <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">name</span></code>)</p>
<a class="reference internal image-reference" href="_images/pyrat_export_select_columns.png"><img alt="_images/pyrat_export_select_columns.png" src="_images/pyrat_export_select_columns.png" style="width: 40%;" /></a>
<p>After downloading the file it’s nessecary to edit the file because the coloumns <strong>Animal type, Available from, Available to</strong> are missing.
Please add the mentioned columns (wherever) and fill it out. As <strong>Animal type</strong> the two values <code class="docutils literal notranslate"><span class="pre">mouse</span></code> or <code class="docutils literal notranslate"><span class="pre">fish</span></code> are possible.
Please use the same date format for the coloumns <strong>Available from, Available to</strong> like at the exported coloumn <strong>DOB</strong> (Deate of birth).
To simplify this process there are macros for LibreOffice and MS Office. The macros automatically add the missing coloumns and add the values
<code class="docutils literal notranslate"><span class="pre">mouse</span></code> (Animal type), <code class="docutils literal notranslate"><span class="pre">Current</span> <span class="pre">Date</span></code> (Available from), <code class="docutils literal notranslate"><span class="pre">Current</span> <span class="pre">Date</span> <span class="pre">+</span> <span class="pre">14</span> <span class="pre">days</span></code> (Available to).
Please refeer to the <a class="reference external" href="https://anishare.leibniz-fli.de/macros/">macro site</a> to downloading the macros and further informations.</p>
<p>After adding the missing coloumns the file can be save, for example as xlsx file. Now go to the anishare admin interface to <code class="docutils literal notranslate"><span class="pre">Home</span> <span class="pre">›</span> <span class="pre">Animals</span> <span class="pre">›</span> <span class="pre">Animals</span></code>
and click the button <code class="docutils literal notranslate"><span class="pre">IMPORT</span></code> (above the filter). Select the file and choose the file format. Upload the file. After submitting all datasets will show to
the user if all requirements match.</p>
</div>
<div class="section" id="from-tick-lab">
<h5>From <a class="reference external" href="mailto:tick&#37;&#52;&#48;lab">tick<span>&#64;</span>lab</a><a class="headerlink" href="#from-tick-lab" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="add-organs-manually">
<h4>Add Organs manually<a class="headerlink" href="#add-organs-manually" title="Permalink to this headline">¶</a></h4>
<p>Click on <code class="docutils literal notranslate"><span class="pre">Organs</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Add</span></code> to add an organ.</p>
<a class="reference internal image-reference" href="_images/admin_add_organ.png"><img alt="_images/admin_add_organ.png" src="_images/admin_add_organ.png" style="width: 40%;" /></a>
<p>All fields in bold <strong>need</strong> to be filled in, the others are optional.</p>
</div>
<div class="section" id="organs-import">
<h4>Organs import<a class="headerlink" href="#organs-import" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="duplicating-entries">
<h4>Duplicating entries<a class="headerlink" href="#duplicating-entries" title="Permalink to this headline">¶</a></h4>
<p>For input of multiple similar entries, it is possible to duplicate an animal or organ entry. For this, select one
or more entries in the list (see figure below) and select “<cite>copy animal</cite>” from the dropdown menu and click
“<cite>Go</cite>”.</p>
<a class="reference internal image-reference" href="_images/admin_copy_animal.png"><img alt="_images/admin_copy_animal.png" src="_images/admin_copy_animal.png" style="width: 75%;" /></a>
<p>Another option is to edit an existing animal and click on “<cite>Save as new</cite>”. This will save the
currently edited animal as a new instance:</p>
<img alt="_images/admin_save_as_new.png" src="_images/admin_save_as_new.png" />
</div>
</div>
<div class="section" id="main-administrator-tasks">
<h3>Main administrator tasks<a class="headerlink" href="#main-administrator-tasks" title="Permalink to this headline">¶</a></h3>
<p>The administrator can edit more objects in the admin interface, namely not just animals and organs
but also labs, locations and persons:</p>
<a class="reference internal image-reference" href="_images/admin_overview.png"><img alt="_images/admin_overview.png" src="_images/admin_overview.png" style="width: 60%;" /></a>
<div class="section" id="organs-used">
<h4>Organs used<a class="headerlink" href="#organs-used" title="Permalink to this headline">¶</a></h4>
<p>These organs are standard values for the field <strong>Organ used</strong>.</p>
</div>
<div class="section" id="id1">
<h4>Animals<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>The main category to administer are animals to share.
Here, several filters (such as “sex”, “location”, etc.) are available to search for any set of animals.</p>
<img alt="_images/admin_animals.png" src="_images/admin_animals.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">in order to remove a claim (thus making the animal available again), either click on an animal
and remove the email address from the field “new owner”, or select one or multiple animals and
select the “clear claim” <em>Action</em> and click “Go”.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Once created, an animal cannot be deleted, except by the administrator.</p>
</div>
</div>
<div class="section" id="labs">
<h4>Labs<a class="headerlink" href="#labs" title="Permalink to this headline">¶</a></h4>
<p>Labs are research labs/research groups and need to have at least one responsible/contact person each</p>
<a class="reference internal image-reference" href="_images/admin_labs.png"><img alt="_images/admin_labs.png" src="_images/admin_labs.png" style="width: 60%;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only <em>administrators</em> are allowed to see and change Labs</p>
</div>
</div>
<div class="section" id="locations">
<h4>Locations<a class="headerlink" href="#locations" title="Permalink to this headline">¶</a></h4>
<p>Locations are where animals are stored. Usually something like room numbers or “animal house” or “fish facility”.</p>
<a class="reference internal image-reference" href="_images/admin_locations.png"><img alt="_images/admin_locations.png" src="_images/admin_locations.png" style="width: 60%;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only <em>administrators</em> are allowed to see and change Locations</p>
</div>
</div>
<div class="section" id="persons">
<h4>Persons<a class="headerlink" href="#persons" title="Permalink to this headline">¶</a></h4>
<p>Persons responsible for the animals. Could be a vet or similar.
Every animal needs to have a responsible person associated to them. This person then gets
an email when the animal is being claimed.</p>
<img alt="_images/admin_persons.png" src="_images/admin_persons.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only <em>administrators</em> are allowed to see and change Persons</p>
</div>
</div>
<div class="section" id="make-a-user-an-animal-manager">
<h4>Make a user an animal manager<a class="headerlink" href="#make-a-user-an-animal-manager" title="Permalink to this headline">¶</a></h4>
<p>The <em>administrator</em> is also responsible for user/rights management.
In order to be able to add/edit animals, a user has to be in the group <em>animal manager</em> and have
<em>staff status</em> in the django admin interface. For this, an <em>administrator</em> has to go to the <a class="reference external" href="https://anishare.leibniz-fli.de/admin/auth/user/">user management</a> in the admin interface by clicking “Home” -&gt; “Authentication and
Authorization” -&gt; “Users”. Here, they can make a <em>user</em> an <em>animal manager</em>, by setting these values (<em>staff</em>
and group <em>animal manager</em>):</p>
<a class="reference internal image-reference" href="_images/admin_permissions_user.png"><img alt="_images/admin_permissions_user.png" src="_images/admin_permissions_user.png" style="width: 75%;" /></a>
</div>
<div class="section" id="anishare-change-history">
<h4>Anishare change history<a class="headerlink" href="#anishare-change-history" title="Permalink to this headline">¶</a></h4>
<p>New functions and bugfix at the system should be documented. So users can be informed about changes on the system.
All changes are visible to authenticated users. Please refeer to the site <a class="reference external" href="https://anishare.leibniz-fli.de/changehistory/">AniShare Change History</a> to see all changes.</p>
</div>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>We use the latest version of <a class="reference external" href="https://www.djangoproject.com">django</a>, which requires <a class="reference external" href="https://www.python.org">python3</a>.
Install django and other dependancies (see file requirements.txt. We recommend using a virtual environment for this):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="o">-</span><span class="n">p</span> <span class="n">python3</span> <span class="o">.</span>
<span class="n">source</span> <span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
<div class="section" id="first-time-setup">
<h3>First time setup<a class="headerlink" href="#first-time-setup" title="Permalink to this headline">¶</a></h3>
<p>First, in the folder <code class="docutils literal notranslate"><span class="pre">anishare</span></code>, copy the file <code class="docutils literal notranslate"><span class="pre">local_settings.py.template</span></code>
to <code class="docutils literal notranslate"><span class="pre">local_settings.py</span></code> and fill it in. If you want to use LDAP, comment in
the respective lines. Most importantly, you should configure the following lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">EMAIL_HOST</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">ALLOWED_HOSTS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="p">]</span>
</pre></div>
</div>
<p>Then, you can run migrations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This will create the sqlite database <code class="docutils literal notranslate"><span class="pre">db.sqlite3</span></code> containing all the models
(eg. tables) as defined in <a class="reference internal" href="modules/models.html#module-animals.models" title="animals.models"><code class="xref py py-mod docutils literal notranslate"><span class="pre">animals.models</span></code></a>.</p>
</div>
<p>Now create a superuser:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">createsuperuser</span>
</pre></div>
</div>
<p>You are now able to login to the admin interface, but first run the dev server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">runserver</span>
</pre></div>
</div>
<p>This will listen on <code class="docutils literal notranslate"><span class="pre">http://localhost:8000</span></code>, so browse to the admin page
<code class="docutils literal notranslate"><span class="pre">http://localhost:8000/admin</span></code> and you should see this after login:</p>
<img alt="_images/admin_empty.png" src="_images/admin_empty.png" />
<p>You can also import a dummy set of data using the <code class="docutils literal notranslate"><span class="pre">loaddata</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">loaddata</span> <span class="n">initial_data</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>After loading the data, the main admin interface should look like this:</p>
<img alt="_images/admin_after_loaddata.png" src="_images/admin_after_loaddata.png" />
</div>
<div class="section" id="importing-existing-data">
<h3>Importing existing data<a class="headerlink" href="#importing-existing-data" title="Permalink to this headline">¶</a></h3>
<p>For import of existing data in tabular (excel) format, a management command is available at
<code class="xref py py-mod docutils literal notranslate"><span class="pre">animals.management.commands.import_animals</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">import_animals</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See the file <code class="docutils literal notranslate"><span class="pre">example_import.xls</span></code> for an example…</p>
</div>
<img alt="_images/import_excel_sheet.png" src="_images/import_excel_sheet.png" />
</div>
<div class="section" id="in-db-caching">
<h3>In-DB Caching<a class="headerlink" href="#in-db-caching" title="Permalink to this headline">¶</a></h3>
<p>By default, database caching is enabled in settings. To create the necessary tables, run this
command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">createcachetable</span>
</pre></div>
</div>
<p>This will create a cache table in the SQLite database, which will speed up queries.</p>
</div>
<div class="section" id="running-tests">
<h3>Running Tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h3>
<p>Tests reside in <code class="docutils literal notranslate"><span class="pre">animals/tests.py</span></code>.
You can invoke the django tests like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Tests for Anishare website</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span><span class="p">,</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">django.core.management</span> <span class="kn">import</span> <span class="n">call_command</span>

<span class="k">class</span> <span class="nc">GetAnimalsTest</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test module to GET Animal pages</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Creating a user first and loading fixtures&quot;&quot;&quot;</span>
        <span class="n">call_command</span><span class="p">(</span><span class="s1">&#39;loaddata&#39;</span><span class="p">,</span> <span class="s1">&#39;initial_data.json&#39;</span><span class="p">,</span> <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Load fixtures</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;testuser&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_get_all_animals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; try to retrieve all animals &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/animals/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">302</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;testuser&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/animals/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_get_one_animal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; try to retrieve individual animals &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/animals/1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">302</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;testuser&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/animals/1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_claim_one_animal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; try to claim individual animals &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/animals/claim/1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">302</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;testuser&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/animals/claim/1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="upgrading-django">
<h4>Upgrading django<a class="headerlink" href="#upgrading-django" title="Permalink to this headline">¶</a></h4>
<p>To upgrade django or any other python library for anishare, go into the anishare directory, and
activate its virtualenv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">anishare</span>
<span class="n">source</span> <span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Next, install/upgrade whatever library (here: django to the latest version):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">django</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It’s best to test the latest version in a local/development environment first!</p>
</div>
</div>
<div class="section" id="upgrading-python">
<h4>Upgrading python<a class="headerlink" href="#upgrading-python" title="Permalink to this headline">¶</a></h4>
<p>When upgrading the python version of the host operating system, it might be necessary to also
upgrade the python in the virtualenv. Otherwise an error like the following might occur:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">python:</span> <span class="pre">error</span> <span class="pre">while</span> <span class="pre">loading</span> <span class="pre">shared</span> <span class="pre">libraries:</span> <span class="pre">libpython3.4m.so.1.0:</span> <span class="pre">cannot</span> <span class="pre">open</span> <span class="pre">shared</span> <span class="pre">object</span> <span class="pre">file:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code></div></blockquote>
<p>In that case, go into the anishare directory, and delete the following directories:</p>
<ul class="simple">
<li>bin</li>
<li>include</li>
<li>lib</li>
<li>lib64</li>
</ul>
<p>Afterwards, create a new virtualenv and install the required libraries like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="o">-</span><span class="n">p</span> <span class="n">python3</span> <span class="o">.</span>
<span class="n">source</span> <span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="api-documentation">
<h1>API documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-animals.admin">
<span id="admin"></span><h2>Admin<a class="headerlink" href="#module-animals.admin" title="Permalink to this headline">¶</a></h2>
<p>Admin module</p>
<dl class="class">
<dt id="animals.admin.AnimalAdmin">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">AnimalAdmin</code><span class="sig-paren">(</span><em>model</em>, <em>admin_site</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.AnimalAdmin" title="Permalink to this definition">¶</a></dt>
<dd><p>ModelAdmin for Animal model</p>
<dl class="method">
<dt id="animals.admin.AnimalAdmin.age">
<code class="descname">age</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.AnimalAdmin.age" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the age in the admin as ‘Age (w)’ instead of ‘age’</p>
</dd></dl>

<dl class="attribute">
<dt id="animals.admin.AnimalAdmin.form">
<code class="descname">form</code><a class="headerlink" href="#animals.admin.AnimalAdmin.form" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="modules/admin.html#animals.admin.AnimalForm" title="animals.admin.AnimalForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnimalForm</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="animals.admin.AnimalAdmin.resource_class">
<code class="descname">resource_class</code><a class="headerlink" href="#animals.admin.AnimalAdmin.resource_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="modules/admin.html#animals.admin.AnimalResource" title="animals.admin.AnimalResource"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnimalResource</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="animals.admin.AnimalAdmin.save_model">
<code class="descname">save_model</code><span class="sig-paren">(</span><em>request</em>, <em>obj</em>, <em>form</em>, <em>change</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.AnimalAdmin.save_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a model instance save it to the database.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.admin.AnimalForm">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">AnimalForm</code><span class="sig-paren">(</span><em>data=None</em>, <em>files=None</em>, <em>auto_id='id_%s'</em>, <em>prefix=None</em>, <em>initial=None</em>, <em>error_class=&lt;class 'django.forms.utils.ErrorList'&gt;</em>, <em>label_suffix=None</em>, <em>empty_permitted=False</em>, <em>instance=None</em>, <em>use_required_attribute=None</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.AnimalForm" title="Permalink to this definition">¶</a></dt>
<dd><p>Form for animal editing in admin</p>
<dl class="method">
<dt id="animals.admin.AnimalForm.clean">
<code class="descname">clean</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.AnimalForm.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook for doing any extra form-wide cleaning after Field.clean() has been
called on every field. Any ValidationError raised by this method will
not be associated with a particular field; it will have a special-case
association with the field named ‘__all__’.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.admin.AnimalResource">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">AnimalResource</code><a class="headerlink" href="#animals.admin.AnimalResource" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="animals.admin.AnimalResource.get_instance">
<code class="descname">get_instance</code><span class="sig-paren">(</span><em>instance_loader</em>, <em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.AnimalResource.get_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the <span class="xref std std-doc">InstanceLoader</span>.</p>
</dd></dl>

<dl class="method">
<dt id="animals.admin.AnimalResource.import_obj">
<code class="descname">import_obj</code><span class="sig-paren">(</span><em>instance</em>, <em>row</em>, <em>dry_run</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.AnimalResource.import_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Traverses every field in this Resource and calls
<code class="xref py py-meth docutils literal notranslate"><span class="pre">import_field()</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.admin.ChangeAdmin">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">ChangeAdmin</code><span class="sig-paren">(</span><em>model</em>, <em>admin_site</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.ChangeAdmin" title="Permalink to this definition">¶</a></dt>
<dd><p>ChangeAdmin for Change model</p>
</dd></dl>

<dl class="class">
<dt id="animals.admin.LabAdmin">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">LabAdmin</code><span class="sig-paren">(</span><em>model</em>, <em>admin_site</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.LabAdmin" title="Permalink to this definition">¶</a></dt>
<dd><p>ModelAdmin for Lab model</p>
</dd></dl>

<dl class="class">
<dt id="animals.admin.LocationAdmin">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">LocationAdmin</code><span class="sig-paren">(</span><em>model</em>, <em>admin_site</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.LocationAdmin" title="Permalink to this definition">¶</a></dt>
<dd><p>ModelAdmin for Location model</p>
</dd></dl>

<dl class="class">
<dt id="animals.admin.OrganAdmin">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">OrganAdmin</code><span class="sig-paren">(</span><em>model</em>, <em>admin_site</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.OrganAdmin" title="Permalink to this definition">¶</a></dt>
<dd><p>ModelAdmin for Organ model</p>
<dl class="method">
<dt id="animals.admin.OrganAdmin.age">
<code class="descname">age</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.OrganAdmin.age" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the age in the admin as ‘Age (w)’ instead of ‘age’</p>
</dd></dl>

<dl class="attribute">
<dt id="animals.admin.OrganAdmin.resource_class">
<code class="descname">resource_class</code><a class="headerlink" href="#animals.admin.OrganAdmin.resource_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="modules/admin.html#animals.admin.OrganResource" title="animals.admin.OrganResource"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrganResource</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="animals.admin.OrganAdmin.save_model">
<code class="descname">save_model</code><span class="sig-paren">(</span><em>request</em>, <em>obj</em>, <em>form</em>, <em>change</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.OrganAdmin.save_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a model instance save it to the database.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.admin.OrganResource">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">OrganResource</code><a class="headerlink" href="#animals.admin.OrganResource" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="animals.admin.OrganResource.get_instance">
<code class="descname">get_instance</code><span class="sig-paren">(</span><em>instance_loader</em>, <em>row</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.OrganResource.get_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the <span class="xref std std-doc">InstanceLoader</span>.</p>
</dd></dl>

<dl class="method">
<dt id="animals.admin.OrganResource.import_obj">
<code class="descname">import_obj</code><span class="sig-paren">(</span><em>instance</em>, <em>row</em>, <em>dry_run</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.OrganResource.import_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Traverses every field in this Resource and calls
<code class="xref py py-meth docutils literal notranslate"><span class="pre">import_field()</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.admin.OrgantypeAdmin">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">OrgantypeAdmin</code><span class="sig-paren">(</span><em>model</em>, <em>admin_site</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.OrgantypeAdmin" title="Permalink to this definition">¶</a></dt>
<dd><p>ModelAdmin for Organ types</p>
</dd></dl>

<dl class="class">
<dt id="animals.admin.PersonAdmin">
<em class="property">class </em><code class="descclassname">animals.admin.</code><code class="descname">PersonAdmin</code><span class="sig-paren">(</span><em>model</em>, <em>admin_site</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.PersonAdmin" title="Permalink to this definition">¶</a></dt>
<dd><p>ModelAdmin for Person model</p>
</dd></dl>

<dl class="function">
<dt id="animals.admin.clear_claim">
<code class="descclassname">animals.admin.</code><code class="descname">clear_claim</code><span class="sig-paren">(</span><em>modeladmin</em>, <em>request</em>, <em>queryset</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.clear_claim" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience Function to delete a claim from several selected animals</p>
</dd></dl>

<dl class="function">
<dt id="animals.admin.copy_animal">
<code class="descclassname">animals.admin.</code><code class="descname">copy_animal</code><span class="sig-paren">(</span><em>modeladmin</em>, <em>request</em>, <em>queryset</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.admin.copy_animal" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy an instance of an animal so similar entries can be easily created.</p>
</dd></dl>

</div>
<div class="section" id="module-animals.models">
<span id="models"></span><h2>Models<a class="headerlink" href="#module-animals.models" title="Permalink to this headline">¶</a></h2>
<p>This file describes all the models in the database.</p>
<dl class="class">
<dt id="animals.models.Animal">
<em class="property">class </em><code class="descclassname">animals.models.</code><code class="descname">Animal</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Animal" title="Permalink to this definition">¶</a></dt>
<dd><p>Main model containing the animals.</p>
<dl class="exception">
<dt id="animals.models.Animal.DoesNotExist">
<em class="property">exception </em><code class="descname">DoesNotExist</code><a class="headerlink" href="#animals.models.Animal.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="exception">
<dt id="animals.models.Animal.MultipleObjectsReturned">
<em class="property">exception </em><code class="descname">MultipleObjectsReturned</code><a class="headerlink" href="#animals.models.Animal.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="animals.models.Animal.age">
<code class="descname">age</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Animal.age" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the age of the animal, calculated by the difference to either
the current date or the available_to date</p>
</dd></dl>

<dl class="method">
<dt id="animals.models.Animal.available">
<code class="descname">available</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Animal.available" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the animal is still available</p>
</dd></dl>

<dl class="method">
<dt id="animals.models.Animal.clean">
<code class="descname">clean</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Animal.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p>
</dd></dl>

<dl class="method">
<dt id="animals.models.Animal.description">
<code class="descname">description</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Animal.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Return description of this model</p>
</dd></dl>

<dl class="method">
<dt id="animals.models.Animal.get_absolute_url">
<code class="descname">get_absolute_url</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Animal.get_absolute_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get absolute url for this model. Important to link from the admin.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.models.Change">
<em class="property">class </em><code class="descclassname">animals.models.</code><code class="descname">Change</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Change" title="Permalink to this definition">¶</a></dt>
<dd><p>Model for documentation all changes to anishare</p>
<dl class="exception">
<dt id="animals.models.Change.DoesNotExist">
<em class="property">exception </em><code class="descname">DoesNotExist</code><a class="headerlink" href="#animals.models.Change.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="exception">
<dt id="animals.models.Change.MultipleObjectsReturned">
<em class="property">exception </em><code class="descname">MultipleObjectsReturned</code><a class="headerlink" href="#animals.models.Change.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.models.Lab">
<em class="property">class </em><code class="descclassname">animals.models.</code><code class="descname">Lab</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Lab" title="Permalink to this definition">¶</a></dt>
<dd><p>Labs are only defined by a name and are referenced by
Person(s) which are responsible (contact) person for this lab</p>
<dl class="exception">
<dt id="animals.models.Lab.DoesNotExist">
<em class="property">exception </em><code class="descname">DoesNotExist</code><a class="headerlink" href="#animals.models.Lab.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="exception">
<dt id="animals.models.Lab.MultipleObjectsReturned">
<em class="property">exception </em><code class="descname">MultipleObjectsReturned</code><a class="headerlink" href="#animals.models.Lab.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="animals.models.Lab.responsible_person">
<code class="descname">responsible_person</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Lab.responsible_person" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve only the person(s) which are responsible for this lab.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.models.Location">
<em class="property">class </em><code class="descclassname">animals.models.</code><code class="descname">Location</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Location" title="Permalink to this definition">¶</a></dt>
<dd><p>Location of animals. Eg. animal house, fish facilities etc.</p>
<dl class="exception">
<dt id="animals.models.Location.DoesNotExist">
<em class="property">exception </em><code class="descname">DoesNotExist</code><a class="headerlink" href="#animals.models.Location.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="exception">
<dt id="animals.models.Location.MultipleObjectsReturned">
<em class="property">exception </em><code class="descname">MultipleObjectsReturned</code><a class="headerlink" href="#animals.models.Location.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.models.Organ">
<em class="property">class </em><code class="descclassname">animals.models.</code><code class="descname">Organ</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Organ" title="Permalink to this definition">¶</a></dt>
<dd><p>Model containing the organs</p>
<dl class="exception">
<dt id="animals.models.Organ.DoesNotExist">
<em class="property">exception </em><code class="descname">DoesNotExist</code><a class="headerlink" href="#animals.models.Organ.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="exception">
<dt id="animals.models.Organ.MultipleObjectsReturned">
<em class="property">exception </em><code class="descname">MultipleObjectsReturned</code><a class="headerlink" href="#animals.models.Organ.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="animals.models.Organ.age">
<code class="descname">age</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Organ.age" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the age of the animal, at the time of death</p>
</dd></dl>

<dl class="method">
<dt id="animals.models.Organ.available">
<code class="descname">available</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Organ.available" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the animal is still available</p>
</dd></dl>

<dl class="method">
<dt id="animals.models.Organ.description">
<code class="descname">description</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Organ.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Return description of this model</p>
</dd></dl>

<dl class="method">
<dt id="animals.models.Organ.get_absolute_url">
<code class="descname">get_absolute_url</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Organ.get_absolute_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get absolute url for this model. Important to link from the admin.</p>
</dd></dl>

<dl class="method">
<dt id="animals.models.Organ.get_organtypes">
<code class="descname">get_organtypes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Organ.get_organtypes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all organ types which are used</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.models.Organtype">
<em class="property">class </em><code class="descclassname">animals.models.</code><code class="descname">Organtype</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Organtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Model containing the organ types</p>
<dl class="exception">
<dt id="animals.models.Organtype.DoesNotExist">
<em class="property">exception </em><code class="descname">DoesNotExist</code><a class="headerlink" href="#animals.models.Organtype.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="exception">
<dt id="animals.models.Organtype.MultipleObjectsReturned">
<em class="property">exception </em><code class="descname">MultipleObjectsReturned</code><a class="headerlink" href="#animals.models.Organtype.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.models.Person">
<em class="property">class </em><code class="descclassname">animals.models.</code><code class="descname">Person</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.models.Person" title="Permalink to this definition">¶</a></dt>
<dd><p>The responsible (contact) person for each lab.
This person gets an email when an animal is being claimed.</p>
<dl class="exception">
<dt id="animals.models.Person.DoesNotExist">
<em class="property">exception </em><code class="descname">DoesNotExist</code><a class="headerlink" href="#animals.models.Person.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="exception">
<dt id="animals.models.Person.MultipleObjectsReturned">
<em class="property">exception </em><code class="descname">MultipleObjectsReturned</code><a class="headerlink" href="#animals.models.Person.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-animals.views">
<span id="views"></span><h2>Views<a class="headerlink" href="#module-animals.views" title="Permalink to this headline">¶</a></h2>
<p>Django Views contains all the functions for rendering objects (HTML display).
It also contains an RSS Feed generator class to create an RSS feed from newly created animals</p>
<dl class="docutils">
<dt><strong>Important</strong>:</dt>
<dd>When adding new functions, use the login_required decorator
When adding new classes, use the LoginRequiredMixin</dd>
</dl>
<dl class="class">
<dt id="animals.views.AnimalDetailView">
<em class="property">class </em><code class="descclassname">animals.views.</code><code class="descname">AnimalDetailView</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.views.AnimalDetailView" title="Permalink to this definition">¶</a></dt>
<dd><p>Detail view for an animal.
This is rarely used, rather use the claim page.</p>
<dl class="attribute">
<dt id="animals.views.AnimalDetailView.model">
<code class="descname">model</code><a class="headerlink" href="#animals.views.AnimalDetailView.model" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="modules/models.html#animals.models.Animal" title="animals.models.Animal"><code class="xref py py-class docutils literal notranslate"><span class="pre">animals.models.Animal</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="animals.views.LatestAnimalsFeed">
<em class="property">class </em><code class="descclassname">animals.views.</code><code class="descname">LatestAnimalsFeed</code><a class="headerlink" href="#animals.views.LatestAnimalsFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>RSS Feed for new animals/organs.</p>
<dl class="method">
<dt id="animals.views.LatestAnimalsFeed.item_description">
<code class="descname">item_description</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.views.LatestAnimalsFeed.item_description" title="Permalink to this definition">¶</a></dt>
<dd><p>What to print as item description (use default description from model).</p>
</dd></dl>

<dl class="method">
<dt id="animals.views.LatestAnimalsFeed.item_title">
<code class="descname">item_title</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.views.LatestAnimalsFeed.item_title" title="Permalink to this definition">¶</a></dt>
<dd><p>What to print as item title (use default __str__ of model).</p>
</dd></dl>

<dl class="method">
<dt id="animals.views.LatestAnimalsFeed.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#animals.views.LatestAnimalsFeed.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get latest animals as items.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="animals.views.claim">
<code class="descclassname">animals.views.</code><code class="descname">claim</code><span class="sig-paren">(</span><em>request</em>, <em>primary_key</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.views.claim" title="Permalink to this definition">¶</a></dt>
<dd><p>View to claim an animal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>primary_key</strong> – the id/pk of the animal to retrieve</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">rendered page with the claim form
or 404 if animal not found</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="animals.views.claim_organ">
<code class="descclassname">animals.views.</code><code class="descname">claim_organ</code><span class="sig-paren">(</span><em>request</em>, <em>primary_key</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.views.claim_organ" title="Permalink to this definition">¶</a></dt>
<dd><p>View to claim an organ.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>primary_key</strong> – the id/pk of the organ to retrieve</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">rendered page with the claim form
or 404 if organ not found</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="animals.views.send_email_animal">
<code class="descclassname">animals.views.</code><code class="descname">send_email_animal</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.views.send_email_animal" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to send an email about an animal being claimed.</p>
<p>Needs these variables in the POST request: email, pk, count</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>email</strong> – email address of the request user / new owner</li>
<li><strong>pk</strong> – primary_key of the animal(s) to be claimed</li>
<li><strong>count</strong> – how many animals are being claimed</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="animals.views.send_email_organ">
<code class="descclassname">animals.views.</code><code class="descname">send_email_organ</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#animals.views.send_email_organ" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to send an email about an animal being claimed.</p>
<p>Needs these variables in the POST request: email, pk, count</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>email</strong> – email address of the request user / new owner</li>
<li><strong>pk</strong> – primary_key of the animal(s) to be claimed</li>
<li><strong>organs_wanted</strong> – organs wanted from the given animal</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-animals.urls">
<span id="urls"></span><h2>URLs<a class="headerlink" href="#module-animals.urls" title="Permalink to this headline">¶</a></h2>
<p>animals URL Configuration</p>
<dl class="docutils">
<dt>The <cite>urlpatterns</cite> list routes URLs to views. For more information please see:</dt>
<dd><a class="reference external" href="https://docs.djangoproject.com/en/2.0/topics/http/urls/">https://docs.djangoproject.com/en/2.0/topics/http/urls/</a></dd>
</dl>
<p>Examples:</p>
<dl class="docutils">
<dt>Function views:</dt>
<dd><ol class="first last arabic simple">
<li>Add an import:  from my_app import views</li>
<li>Add a URL to urlpatterns:  path(‘’, views.home, name=’home’)</li>
</ol>
</dd>
<dt>Class-based views:</dt>
<dd><ol class="first last arabic simple">
<li>Add an import:  from other_app.views import Home</li>
<li>Add a URL to urlpatterns:  path(‘’, Home.as_view(), name=’home’)</li>
</ol>
</dd>
<dt>Including another URLconf:</dt>
<dd><ol class="first last arabic simple">
<li>Import the include() function: from django.urls import include, path</li>
<li>Add a URL to urlpatterns:  path(‘blog/’, include(‘blog.urls’))</li>
</ol>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to the documentation of anishare !</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#contact">Contact</a></li>
<li><a class="reference internal" href="#using-the-software">Using the software</a><ul>
<li><a class="reference internal" href="#main-user-interface">Main user interface</a><ul>
<li><a class="reference internal" href="#animals">Animals</a></li>
<li><a class="reference internal" href="#organs">Organs</a></li>
<li><a class="reference internal" href="#rss-feed">RSS Feed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#main-animal-manager-tasks">Main animal manager tasks</a><ul>
<li><a class="reference internal" href="#add-animals-manually">Add Animals manually</a></li>
<li><a class="reference internal" href="#animals-import">Animals import</a><ul>
<li><a class="reference internal" href="#from-pyrat">From PyRAT</a></li>
<li><a class="reference internal" href="#from-tick-lab">From tick&#64;lab</a></li>
</ul>
</li>
<li><a class="reference internal" href="#add-organs-manually">Add Organs manually</a></li>
<li><a class="reference internal" href="#organs-import">Organs import</a></li>
<li><a class="reference internal" href="#duplicating-entries">Duplicating entries</a></li>
</ul>
</li>
<li><a class="reference internal" href="#main-administrator-tasks">Main administrator tasks</a><ul>
<li><a class="reference internal" href="#organs-used">Organs used</a></li>
<li><a class="reference internal" href="#id1">Animals</a></li>
<li><a class="reference internal" href="#labs">Labs</a></li>
<li><a class="reference internal" href="#locations">Locations</a></li>
<li><a class="reference internal" href="#persons">Persons</a></li>
<li><a class="reference internal" href="#make-a-user-an-animal-manager">Make a user an animal manager</a></li>
<li><a class="reference internal" href="#anishare-change-history">Anishare change history</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#first-time-setup">First time setup</a></li>
<li><a class="reference internal" href="#importing-existing-data">Importing existing data</a></li>
<li><a class="reference internal" href="#in-db-caching">In-DB Caching</a></li>
<li><a class="reference internal" href="#running-tests">Running Tests</a><ul>
<li><a class="reference internal" href="#upgrading-django">Upgrading django</a></li>
<li><a class="reference internal" href="#upgrading-python">Upgrading python</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#api-documentation">API documentation</a><ul>
<li><a class="reference internal" href="#module-animals.admin">Admin</a></li>
<li><a class="reference internal" href="#module-animals.models">Models</a></li>
<li><a class="reference internal" href="#module-animals.views">Views</a></li>
<li><a class="reference internal" href="#module-animals.urls">URLs</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Holger Dinkel, Fabian Monheim.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>